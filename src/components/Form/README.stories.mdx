import { Meta, Story, Canvas, ArgsTable } from '@storybook/addon-docs';

import { Form, FormLayout, FormItem, Checkbox, Button, TextField } from '@/polaris-vue';

<Meta
  title="Components / Forms / Form"
  component={ Form }
  argTypes={{
    default: {
      table: {
        disable: true,
      },
    },
    implicitSubmit: {
      table: {
        type: {
          summary: null,
        },
      },
    },
    preventDefault: {
      table: {
        type: {
          summary: null,
        },
      },
    },
  }}
/>

export const Template = (args, { argTypes }) => ({
  props: Object.keys(argTypes),
  components: { Form, FormLayout, FormItem, Checkbox, Button, TextField },
  data() {
    return {
      checkbox: false,
      textField: '',
    };
  },
  methods: {
    handleSubmit(event) {
      event.preventDefault();
      alert(`Form submitted - Checkbox: ${this.checkbox} - email: ${this.textField}`);
      this.checkbox = false;
      this.textField = '';
    },
  },
  template: `<Form @submit="handleSubmit" data-submit="handleSubmit">
    <FormLayout>
      <FormItem>
        <Checkbox id="signUpCheckbox" v-model="checkbox">
          <template slot="label">Sign up for the Polaris newsletter</template>
        </Checkbox>
      </FormItem>
      <FormItem>
        <TextField v-model="textField" type="email" autoComplete="email">
          <template slot="label">Email</template>
          <template slot="help-text">
            <span>
              We'll use this email address to inform you on future changes to
              Polaris.
            </span>
          </template>
        </TextField>
      </FormItem>
      <FormItem>
        <Button submit>Submit</Button>
      </FormItem>
    </FormLayout>
  </Form>`,
});

# Form

A wrapper component that handles the submission of forms.

<Canvas>
  <Story
    name="Form"
    height="200px"
    parameters={{
      docs: {
        transformSource: (source) => {
          const tmpSource = source
            .replace(/:value="false"/, 'v-model="newsletter"')
            .replace(/submit=""/, 'submit')
            .replace(/data-submit/, '@submit')
            .replace(/value=""/, 'v-model="email"');
          return tmpSource;
        },
      },
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

<ArgsTable story="Form"/>
