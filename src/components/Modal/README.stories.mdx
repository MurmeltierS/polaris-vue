import { Meta, Story, Canvas, ArgsTable } from '@storybook/addon-docs';
import dedent from 'ts-dedent';
import {
  Modal, ActionList, Button, Pane, PopoverSection, FormLayout, FormItem, Select, TextField
} from '@/polaris-vue';

<Meta
  title="Components / Overlays / Modal"
  component={ Modal }
  argTypes={{
    close: {
      description: 'Callback when modal is closed',
      control: { disable: true },
      table: {
        type: {
          summary: '"() => void"',
        },
      },
    },
    'scrolled-to-bottom': {
      name: 'scrolled-to-bottom',
      description: 'Callback when the bottom of the modal is reached by mouse or keyboard',
      control: { disable: true },
      table: {
        type: {
          summary: '"() => void"',
        },
      },
    },
    activator: {
      name: 'activator',
      description: 'The element to activate the Modal',
      control: { disable: true },
      table: {
        type: {
          summary: null,
        },
      },
    },
    content: {
      name: 'content',
      description: 'The content to display inside the modal',
      control: { disable: true },
      table: {
        type: {
          summary: null,
        },
      },
    },
    title: {
      name: 'content',
      description: 'The content for the title of the modal',
      control: { disable: true },
      table: {
        type: {
          summary: null,
        },
      },
    },
    footer: {
      description: 'Inner content of the footer',
      control: { disable: true },
      table: {
        type: {
          summary: null,
        },
      },
    },
    default: {
      table: {
        disable: true,
      },
    },
  }}
/>

export const Template = (args, { argTypes }) => ({
  components: { ActionList, Button, Modal },
  data() {
    return {
      active: true,
    };
  },
  methods: {
    toggleActive() {
      this.active = !this.active;
    },
  },
  template: `
    <Modal
      :open="active"
      v-on:close="toggleActive"
      :primaryAction="{ content:'Add Instagram', onAction: toggleActive }"
      :secondaryActions="[{ content:'Learn more', onAction: toggleActive }]"
    >
      <Button slot="activator" v-on:click="toggleActive"> Open </Button>
      <template slot="title"> Reach more shoppers with Instagram product tags </template>
      <ModalSection slot="content">
        <TextContainer>
          <p> Use Instagram posts to share your products with millions of people. Let shoppers buy from your store without leaving Instagram.</p>
        </TextContainer>
      </ModalSection>
    </Modal>`,
});

# Modal

Modals are overlays that require merchants to take an action before they can continue interacting with the rest of Shopify. They can be disruptive and should be used thoughtfully and sparingly.

<font color="red"> Can not test props on this component due to inline Story. Try it on your own project. </font>

<br/><br/><br/>

### Example

<Canvas style={{ backgroundColor: '#f6f6f7' }}>
  <Story
    name="Modal"
    inline={false}
    height="300px"
    args={{
      colorScheme: 'light',
    }}
    parameters={{
      docs: {
        transformSource: (source) => {
          const tmpSource = source
            .replace(/on-/g, 'v-on:')
            .replace(/:items='(.*)'\s*/g, '')
            .replace(/active/, ':active="active"')
          const fullSource = dedent`
            ${tmpSource}
            data() {
              return {
                active: true,
              };
            },
            methods: {
              toggleActive() {
                this.active = !this.active;
              },
            },
          `;
          return fullSource;
        },
      },
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

<ArgsTable story="Modal" />
